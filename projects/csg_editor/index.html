<!DOCTYPE html><html lang="en" data-astro-transition-scope="astro-smooz4hq-1"> <head><meta charset="utf-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" href="https://fonts.googleapis.com/css2?family=Josefin+Sans&family=Pacifico&display=swap" as="style"><link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&family=Pacifico&display=swap" rel="stylesheet"><meta name="generator" content="Astro v4.16.7"><title>CSG-based level geometry editor</title><style>#themeToggle[data-astro-cid-oemx5le4]{border:0;background:none}#themeToggle[data-astro-cid-oemx5le4]:hover{cursor:pointer;rotate:10deg}.moon[data-astro-cid-oemx5le4]{fill:#fdebf3}.sun[data-astro-cid-oemx5le4],.light .moon[data-astro-cid-oemx5le4]{fill:transparent}.light .sun[data-astro-cid-oemx5le4]{fill:#1e1e2e}@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
:root{--background: #1e1e2e;--background-light: #ffffff;--button: #78c2ad;--text: #fff7f7;--text-light: #2e2a1e;--text-link: #78c2ad;--underline: #375a7f;--header: "Cambria";--body: "Josefin Sans", sans-serif}html{background-color:var(--background);color:var(--text)}body{max-width:780px;margin:0 auto;text-align:justify}h1,h2{font-family:var(--header);font-weight:400}h1{font-size:2.6rem;margin:0 0 5px}h2{text-decoration:underline var(--underline);text-decoration-thickness:4px;text-underline-offset:7px;font-size:2.1rem;margin-bottom:0}p{font-family:var(--body);font-size:1.1rem;hyphens:None;line-height:1.5;text-indent:1rem}small,li{font-family:var(--body)}.navbar{display:grid;grid-template-columns:1fr 1fr;margin-top:.8rem}.navbar__title{font-family:var(--header);font-size:1.3rem}.navbar__menu{font-family:var(--body);font-size:1.1rem;text-align:right}.navbar__title>a,.navbar__menu>a{color:var(--text);text-decoration:none}.navbar__menu>a{margin:0 10px}.navbar__title>a:hover,.navbar__menu>a:hover,.navbar__menu>a:focus{text-decoration:underline var(--underline);text-decoration-thickness:2px;text-underline-offset:6px}.gif{margin:20px 0 0;text-align:center}.badge{background-color:#584966;color:var(--text);border-radius:6px;font-family:var(--body);font-weight:600;font-size:.85rem;padding:.3em .6em .2em}.badge__list{text-indent:1rem;list-style:none;padding:0}.badge__list>li{margin-top:10px}.badge--item{border-radius:4px;font-size:.7rem;margin-right:5px;padding:.5em .3em .3em}.badge__link{color:var(--text-link);text-decoration:none}.badge__link:hover{text-decoration:underline}.card{list-style:none;display:flex;background-size:400%;padding:20px}.card__link{width:100%;text-decoration:none;line-height:1.4;border-radius:8px;color:var(--text)}.card__img{border-radius:5px}.card__title{margin:0;font-family:var(--body);font-size:1.5rem;font-weight:400;text-align:left}.card__txt{font-size:1rem;line-height:1.5;text-indent:0;text-align:left;margin:.5rem 0 0}.card__link:hover{transform:scale(1.05)}.link-card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(50ch,1fr));gap:1rem;padding:0}.btn{text-align:center;background:#0000;border:2px solid var(--button);border-radius:8px;color:var(--text);font:600 16px var(--body);padding:8px 16px;transition:background-color .4s,color .4s}.btn:hover{background-color:var(--button);color:var(--text-light);cursor:pointer}.skills{margin-top:8px}.skills__img{margin:8px 4px}.center{text-align:center}.pro-img{border-radius:16px;margin-top:10px}footer{margin:4rem 0}.footer__link{color:var(--text-link);text-decoration:none}.footer{cursor:default;list-style:none;padding:0}.icon__btn{display:inline-block;padding:0 .5rem}.icon__link{display:flex;padding:10px;height:20px;width:20px;border-radius:50%;border:2px solid #fdebf3}.icon__link:hover{border-color:var(--text-link)}.git-icon{content:url(/github-mark-white.svg)}.mail-icon{content:url(/mail-white.svg)}.linked-in{content:url(/li-in-white.png)}.lost{margin-top:30%;text-align:center}.lost__header{margin:0 auto;text-align:center;border:0;font-size:7.5rem;letter-spacing:10px}.lost__body{color:#5c5b77}.lost__link{color:var(--text-link);text-decoration:none}html.light{background-color:var(--background-light);color:var(--text-light)}.light .navbar__title>a{color:var(--text-light)}.light .navbar__menu>a{color:var(--text-light)}.light .card__title,.light .card__txt,.light .btn{color:var(--text-light)}.light .btn:hover{color:var(--text)}.light .icon__link{border:2px solid var(--text-light)}.light .icon__link:hover{border-color:var(--text-link)}.light .git-icon{content:url(/github-mark.svg)}.light .mail-icon{content:url(/mail.svg)}.light .linked-in{content:url(/li-in.png)}.light .badge__link{color:var(--text-link)}@media only screen and (max-width: 600px){body{width:350px}.navbar{display:initial}.navbar__title,.navbar__menu{text-align:center}.navbar__menu>a{margin:0 11px}.skills__img{height:30px;width:30px;margin:8px 1px}.badge__list{font-size:.9rem;text-indent:0}.pro-img{height:auto;width:350px}}
</style><script type="module">function e(){localStorage.theme==="light"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: light)").matches?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light")}e();document.addEventListener("astro:after-swap",e);
</script><style>[data-astro-transition-scope="astro-smooz4hq-1"] { view-transition-name: astro-smooz4hq-1; }@layer astro { ::view-transition-old(astro-smooz4hq-1) { animation: none; opacity: 0; mix-blend-mode: normal; }::view-transition-new(astro-smooz4hq-1) { animation: none; mix-blend-mode: normal; }::view-transition-group(astro-smooz4hq-1) { animation: none } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-smooz4hq-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-smooz4hq-1"] { animation: none; mix-blend-mode: normal; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-smooz4hq-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-smooz4hq-1"] { animation: none; mix-blend-mode: normal; }</style></head> <body> <header> <nav data-astro-transition-persist="astro-c3mo5b3h-2"> <div class="navbar"> <div class="navbar__title"></div> <div class="navbar__menu"> <a href="/">Home</a> <a href="https://github.com/eeromutka" target="_blank">GitHub</a> <button id="themeToggle" title="Theme Toggle" data-astro-cid-oemx5le4> <svg width="30px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-astro-cid-oemx5le4> <path class="sun" fill-rule="evenodd" d="M12 17.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zm0 1.5a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm12-7a.8.8 0 0 1-.8.8h-2.4a.8.8 0 0 1 0-1.6h2.4a.8.8 0 0 1 .8.8zM4 12a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1 0-1.6h2.5a.8.8 0 0 1 .8.8zm16.5-8.5a.8.8 0 0 1 0 1l-1.8 1.8a.8.8 0 0 1-1-1l1.7-1.8a.8.8 0 0 1 1 0zM6.3 17.7a.8.8 0 0 1 0 1l-1.7 1.8a.8.8 0 1 1-1-1l1.7-1.8a.8.8 0 0 1 1 0zM12 0a.8.8 0 0 1 .8.8v2.5a.8.8 0 0 1-1.6 0V.8A.8.8 0 0 1 12 0zm0 20a.8.8 0 0 1 .8.8v2.4a.8.8 0 0 1-1.6 0v-2.4a.8.8 0 0 1 .8-.8zM3.5 3.5a.8.8 0 0 1 1 0l1.8 1.8a.8.8 0 1 1-1 1L3.5 4.6a.8.8 0 0 1 0-1zm14.2 14.2a.8.8 0 0 1 1 0l1.8 1.7a.8.8 0 0 1-1 1l-1.8-1.7a.8.8 0 0 1 0-1z" data-astro-cid-oemx5le4></path> <path class="moon" fill-rule="evenodd" d="M16.5 6A10.5 10.5 0 0 1 4.7 16.4 8.5 8.5 0 1 0 16.4 4.7l.1 1.3zm-1.7-2a9 9 0 0 1 .2 2 9 9 0 0 1-11 8.8 9.4 9.4 0 0 1-.8-.3c-.4 0-.8.3-.7.7a10 10 0 0 0 .3.8 10 10 0 0 0 9.2 6 10 10 0 0 0 4-19.2 9.7 9.7 0 0 0-.9-.3c-.3-.1-.7.3-.6.7a9 9 0 0 1 .3.8z" data-astro-cid-oemx5le4></path> </svg> </button>  <script>
    const theme = (() => {
        if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
            return localStorage.getItem('theme');
        }
        if (window.matchMedia('(prefers-color-scheme: light)').matches) {
            return 'light';
        }
        return 'dark';
    })();

    if (theme === 'dark') {
        document.documentElement.classList.remove('light');
    } else {
        document.documentElement.classList.add('light');
    }

    window.localStorage.setItem('theme', theme);

    const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("light");

        const isLight = element.classList.contains("light");
        localStorage.setItem("theme", isLight ? "light" : "dark");
    }

    document.getElementById("themeToggle").addEventListener("click", handleToggleClick);
</script> </div> </div> </nav> </header> <main>  <h2>CSG-based level geometry editor</h2>  <p><span class="badge">C++</span>
<span class="badge">D3D11</span>
<span class="badge">HLSL</span></p>
<p>A 3D level editor with real-time constructive solid geometry editing.</p>
<br>
<iframe allow="fullscreen;" width="100%" height="400" src="https://www.youtube.com/embed/ItKtSbvMvyI" &#x22;=""></iframe>
<br>
<br>
<br>
<p>I've wanted to make a new 3D modeling tool for a long time - a tool that would encourage creative experimentation by minimizing friction. The sculpting tools of <a href="https://youtu.be/v27LZivpffQ">Dreams</a> were a big inspiration to me, and the idea of a <a href="https://youtu.be/DpSWMQgBpHI">sensitive tool</a> - a tool that is simple, but which allows for great skill and expression, such as a pencil or a piano.</p>
<p>Dreams uses signed distance functions to implement solid modeling operations. SDFs are nice and simple, but if the list of shapes gets large, rendering it naively with ray marching would be too expensive to do in real time. Dreams uses advanced compute-shaders and point-clouds to render SDFs in a painterly style. However, I wanted to stay in the realm of triangle meshes since they're used in modern game engines and SDFs have some limitations anyway, so I decided to do look into 3D mesh boolean algorithms. I wanted them to be fast enough for real-time editing of complex meshes, but also robust to edge-case scenarios. Popular 3D software still struggle with these goals, and I wanted to try doing better.</p>
<p>It wasn't easy. Writing a boolean algorithm is straight forward, in theory: slice each face in each input mesh by all other faces (in both meshes), then do a raycast per face to determine which (if any) input mesh the face is inside of, and with that, determine if the face should be kept, discarded or flipped. The same algorithm applies to any kind of boolean op (subtraction / union / intersection), only the final step of deciding when to keep/discard/flip a face is different. But what happens if two faces are overlapping? This would be an annoying edge case that could be handled for example by <a href="https://arxiv.org/abs/math/9410209">Simulating Simplicity</a>. With floating point math, the edge case likely wouldn't happen per se, but worse: due to small floating point rounding errors in expressions, a comparison may straight up lie to us if it's near its turning point (i.e. "X > Y" might return "true" even if X &#x3C; Y and X ~= Y). </p>
<iframe allow="fullscreen;" width="100%" height="400" src="https://www.youtube.com/embed/QbqmdJI531A" &#x22;=""></iframe>
<i>2D prototype I made of the algorithm before porting it to 3D</i><br><br>
<p>After some experiments, I took inspiration from the paper: <a href="https://arxiv.org/abs/2103.02486">Fast Exact Booleans for Iterated CSG using Octree-Embedded BSPs</a> and implemented a similar scheme for dealing with geometry robustly. The idea is to represent all geometry using planes, where a plane is defined as the four fixed-size integer coefficients `A, B, C, D` of the plane equation `Ax + By + Cz + D = 0`. Edges are represented as the intersection of two planes, points by the intersection of three planes, and (convex) polygons by a plane and a list of edge planes. A nice property of boolean operations is that the result of a boolean is fully made up of polygons from either of its input meshes, possibly flipped or cut by each other's planes. That means it's possible to represent the boolean result mesh using only the original planes from the two input meshes. That's perfect, as we can then apply as many boolean operations as we want without ever growing the bit complexity or requiring quantization!</p>
<iframe allow="fullscreen;" width="100%" height="400" src="https://www.youtube.com/embed/5UDfIZ1YtxE" &#x22;=""></iframe>
<i>Self-intersections being resolved and turned into holes.</i><br><br>
<p>I extended my algorithm to handle self-intersections as well, as opposed to requiring 2 well-formed input meshes at a time. This means that fun things like <a href="https://blender.stackexchange.com/questions/228336/correct-way-to-extrude-inward-intrude">Sketchup-style extrusions</a> are allowed, and it will also allow for robustly moving/rotating/scaling intermediate results and quantizing vertices, as the self-intersections introduced by these operations are resolved by the algorithm. For implementing this, I took inspiration from the paper <a href="https://users.cs.utah.edu/~ladislav/jacobson13robust/jacobson13robust.html">Robust Inside-Outside Segmentation using Generalized Winding Numbers</a>. I use BSP trees to subdivide the 3D space into cells and form links from these cells to their neighbouring cells and faces. I then flood-fill the "insideness" value from each BSP cell to its neighbours using this structure and finally output faces between the cells that cross the "insideness" 0 boundary. I made this all run on a separate thread so that the user-facing UI would always stay snappy. If the computation takes more than 1 frame, the rendered mesh will just lag slightly behind the 3D wireframe UI.</p>
<p>The big challenge when working with 3D geometry algorithms is debugging it when something goes wrong. There are often large structures of data filled with internal links and difficult-to-visualize coordinate values, making it very hard and tedious to see what is going on. There are two things that helped me stay sane: 1. easy-to-use 3D debug drawing functions for points, lines, strings, etc... 2. Eero's replay debugger - I stole this idea from <a href="https://youtu.be/1Gce4l5orts?t=3683">one of Media Molecule's streams</a>. The idea is to setup a deterministic simulation and to record all user inputs from each frame into a file. Then, if you hit a problem, you can simply feed that file into the simulation again and debug-step your way into the problem as many times as you want! I even setup a <a href="https://github.com/mattconte/tlsf">custom allocator</a> using a fixed-address buffer so that all memory addresses would be deterministic as well. I only regret not setting this up earlier. </p>
<iframe allow="fullscreen;" width="100%" height="400" src="https://www.youtube.com/embed/wmVuRsS9yDc"></iframe>
<i>Recording and playing a replay.</i><br><br>
<p>Recently, I've been working on the editor itself. It has been really fun to put it together and to see each feature addition noticably improve the 3D editing workflow. For the design, it's mostly trial and error, looking for inspiration from other creative tools, and going with what <i>feels right</i>. I feel like the editor is at a good point now with a solid base that I can extend further. I will continue working on it more and trying to pull the release date somewhere into the horizon!</p>
<iframe allow="fullscreen;" width="100%" height="400" src="https://www.youtube.com/embed/917V9_SINc8"></iframe>
<i>Quick, inaccurate replica of Dust 2 A-site</i><br><br>   <footer> <div class="center"> <ul class="footer"> <li class="icon__btn"><a class="icon__link" href="#" target="_blank"><span class="git-icon">GitHub</span></a></li> <li class="icon__btn"><a class="icon__link" href="mailto: #@gmail.com"><span class="mail-icon">Email</span></a></li> <li class="icon__btn"><a class="icon__link" href="#" target="_blank"><span class="linked-in">LinkedIn</span></a></li> </ul> <small>&copy; 2024 Milky-Way by <a class="footer__link" href="https://github.com/ttomczak3">ttomczak</a>. All Rights Reserved.</small> </div> </footer> </main>  </body> </html>